<!doctype html>
<html>
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
		<!-- Custom CSS -->
	{%load static%}
    <link href="{% static 'todos/header_footer.css' %}" rel="stylesheet">

    <title>TODO Tracker</title>
  </head>

	<body>
		<!-- Header with navbar -->
		<header>
			<nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">

				<!-- Project Name -->
				<a class="navbar-brand">ToDo</a>

				<!-- Navbar Tabs -->
				<!-- collapsed for small devices and below -->
				<div class="collapse navbar-collapse" id="navbarsExampleDefault">
					<ul class="navbar-nav mr-auto">
						<li class="nav-item active">
							<a class="nav-link" href="overview">Home <span class="sr-only">(current)</span></a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="newtodo">New</a>
						</li>
					</ul>
				</div>
				<!-- Impressum (non-collapsable) -->
				<a class="nav-link" href="{% url 'todos:impressum'%}">Impressum</a>

			</nav>
		</header>

		<!-- Main content of the site -->
    <main>
			<div class="container">
				<!-- Heading -->
				<h1>Your TODOs</h1>

				{% if all_todos %}
					<!-- Table for TODOs -->
					<table class="table table-hover table-striped">
						<!-- First row with labels-->
						<thead> 
							<tr>
								<th scope="col">ID</th>
								<th scope="col">ToDo</th>
								<th scope="col">Deadline</th>
								<th scope="col">Progress</th>
								<th scope="col">Modify</th>
							</tr>
						</thead>

						<!-- Individual TODOs --> 
						<tbody>
							{% for Todo in all_todos%}	
								<tr>
									<th scope="row">{{Todo.id}}</th>
									<td>{{Todo.todo_text}}</td>
									<td>{{Todo.deadline}}</td>
									<!-- Progress bar with label -->
									<td>
										<div class="progress position-relative">
											<!-- style="width", aria-valuenow and label text all need to be changed to show up properly -->
											<div class="progress-bar" role="progressbar" style="width: {{Todo.progress}}%;" aria-valuenow="{{Todo.progress}}" aria-valuemin="0" aria-valuemax="100"></div>
											<!-- to center the label on the progress bar -->
											<small class="justify-content-center d-flex position-absolute w-100 font-weight-bold">{{Todo.progress}}</small>
										</div>
									</td>
									<!-- Buttons for Edit and Delete -->
									<td>
										<a href="{{Todo.id}}/edit" class="btn btn-primary btn-autosize" role="button">Edit</a>
										<form action="{%url 'todos:delete' Todo.id%}" method="POST">
										{% csrf_token %}
											<button type="submit" class="btn btn-danger btn-autosize" data-toggle="tooltip" data-placement="right" value="delete">Delete</button>
										</form>
									</td>
								</tr>
							{% endfor %}
						</tbody>
					</table>
					{% else %}
						<p>No Todo's are availible</p>
				{% endif %}
				<!-- Button to create new todo page -->
				<a href="newtodo" class="btn btn-primary" role="button">Create New TODO</a>
			</div>
    </main>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    {% comment %} <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
    <script src="../../assets/js/vendor/popper.min.js"></script>
    <script src="../../dist/js/bootstrap.min.js"></script> {% endcomment %}
  </body>
</html>